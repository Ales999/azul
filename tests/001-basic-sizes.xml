<!-- Test a basic block of 100x50px -->
<test name="simple-width">
    <html>
        <body>
            <div id="foo" />
        </body>
    </html>

    <style>
        #foo {
            width: 100px;
            height: 50px;
        }
    </style>

    <output size="600x100">
        Frame(
            rect: 600x50 @ (0, 0),
            children: [
                Frame(
                    rect: 100x50 @ (0, 0),
                ),
            ],
        )
    </output>

    <output size="800x1200">
        Frame(
            rect: 800x50 @ (0, 0),
            children: [
                Frame(
                    rect: 100x50 @ (0, 0),
                ),
            ],
        )
    </output>
</test>

<!-- Test that the percentage is propagated from the root -->
<test name="calculate-percentage">
    <html>
        <body>
            <div id="foo" />
        </body>
    </html>

    <style>
        body {
            height: 100%;
        }

        #foo {
            width: 100%;
            height: 50%;
        }
    </style>

    <output size="600x100">
        Frame(
            rect: 600x100 @ (0, 0),
            children: [
                Frame(
                    rect: 600x50 @ (0, 0),
                ),
            ],
        )
    </output>

    <output size="800x1200">
        Frame(
            rect: 800x1200 @ (0, 0),
            children: [
                Frame(
                    rect: 800x600 @ (0, 0),
                ),
            ],
        )
    </output>
</test>

<!-- Overflowing content should be displayed in a ScrollFrame -->
<test name="overflow-scrollframe">
    <html>
        <body>
            <div id="foo" />
        </body>
    </html>

    <style>
        #foo {
            width: 500px;
            height: 500px;
        }
    </style>

    <output size="10x10">
        ScrollFrame(
            DisplayListScrollFrame {
                content_rect: 500x500 @ (0, 0)
                scroll_tag: ScrollTagId(1)
                frame: DisplayListFrame {
                    rect: 10x10 @ (0, 0),
                    tag: 1
                    children: [
                        Frame(
                            rect: 500x500 @ (0, 0),
                        ),
                    ]
                }
            },
        )
    </output>

    <output size="1000x800">
        Frame(
            rect: 1000x500 @ (0, 0),
            children: [
                Frame(
                    rect: 500x500 @ (0, 0),
                ),
            ],
        )
    </output>
</test>

<!-- Test that margin: 0 auto centers a div -->
<test name="margin-zero-auto">
    <html>
        <body>
            <div id="foo" />
        </body>
    </html>

    <style>
        #foo {
            width: 50px;
            height: 50px;
            margin: 0 auto;
        }
    </style>

    <!-- 350px | 50px | 350px -->
    <output size="750x50">
        Frame(
            rect: 750x50 @ (0, 0),
            children: [
                Frame(
                    rect: 50x50 @ (350, 0),
                ),
            ],
        )
    </output>
</test>

<!-- A margin on the root node should affect the position-->
<test name="margin-root">
    <html>
        <body>
            <div id="foo" />
        </body>
    </html>

    <style>
        #foo {
            width: 500px;
            height: 500px;
            margin: 50px;
        }
    </style>

    <output size="500x500">
        ScrollFrame(
            DisplayListScrollFrame {
                content_rect: 550x550 @ (0, 0)
                scroll_tag: ScrollTagId(1)
                frame: DisplayListFrame {
                    rect: 500x500 @ (0, 0),
                    tag: 1
                    children: [
                        Frame(
                            rect: 500x500 @ (50, 50),
                        ),
                    ]
                }
            },
        )
    </output>
</test>

<test name="block-layout-simple">
    <html>
        <body>
            <div id="foo" />
            <div id="bar" />
        </body>
    </html>

    <style>
        #foo, #bar {
            width: 50px;
            height: 50px;
        }
    </style>

    <output size="500x500">
        Frame(
            rect: 500x100 @ (0, 0),
            children: [
                Frame(
                    rect: 50x50 @ (0, 0),
                ),
                Frame(
                    rect: 50x50 @ (0, 50),
                ),
            ],
        )
    </output>
</test>

<!-- Test that two divs can have margins that bleed into each other -->
<!-- In this case, the 20px margin-top should overlap the 30px margin-bottom -->
<test name="margin-collapsing-block-layout">
    <html>
        <body>
            <div id="foo" />
            <div id="bar" />
        </body>
    </html>

    <style>
        #foo, #bar {
            width: 50px;
            height: 50px;
        }

        #foo {
            margin-bottom: 30px;
        }

        #bar {
            margin-top: 20px;
        }
    </style>

    <output size="500x500">
        Frame(
            rect: 500x130 @ (0, 0),
            children: [
                Frame(
                    rect: 50x50 @ (0, 0),
                ),
                Frame(
                    rect: 50x50 @ (0, 80),
                ),
            ],
        )
    </output>
</test>